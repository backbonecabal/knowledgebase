<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=no"> <meta name="description" content="Technical Overview User Example Proposed end-user transaction example for interacting with the YCabal NOTE: Since the JSON-RPC spec allows response..."> <meta name="revised" content="e07a35759318188916c4a5c8cb3742a48ebec59b"> <meta name="author" content="backbonecabal"> <meta name="generator" content="rundocs/jekyll-rtd-theme v2.0.10"><meta name="theme-color" content="#2980b9"> <title>Technical Overview 路 Backbone Knowledgebase</title> <meta name="twitter:title" content="Technical Overview 路 Backbone Knowledgebase"> <meta name="twitter:description" content="Technical Overview User Example Proposed end-user transaction example for interacting with the YCabal NOTE: Since the JSON-RPC spec allows response..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@backbonecabal"> <meta name="twitter:url" content="https://github.com/pages/backbonecabal/knowledgebase/technical.html"> <meta name="twitter:creator" content="@rundocs/jekyll-rtd-theme v2.0.10"> <meta property="og:title" content="Technical Overview 路 Backbone Knowledgebase"> <meta property="og:description" content="Technical Overview User Example Proposed end-user transaction example for interacting with the YCabal NOTE: Since the JSON-RPC spec allows response..."> <meta property="og:locale" content="en"> <meta property="og:url" content="https://github.com/pages/backbonecabal/knowledgebase/technical.html"> <meta property="og:type" content="article"> <meta property="article:author" content="backbonecabal"> <meta property="article:published_time" content="2021-01-11T18:19:53+00:00"> <meta property="article:modified_time" content="2021-04-12T09:47:40+00:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "https://github.com/pages/backbonecabal/knowledgebase/technical.html" }, "headline": "Technical Overview 路 Backbone Knowledgebase", "image": [], "author": { "@type": "Person", "name": "backbonecabal" }, "datePublished": "2021-01-11T18:19:53+00:00", "dateModified": "2021-04-12T09:47:40+00:00", "publisher": { "@type": "Organization", "name": "backbonecabal", "logo": { "@type": "ImageObject", "url": "https://avatars.githubusercontent.com/u/74376156?v=4" } }, "description": "Technical Overview User Example Proposed end-user transaction example for interacting with the YCabal NOTE: Since the JSON-RPC spec allows response..." } </script> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prev" href="https://github.com/pages/backbonecabal/knowledgebase/obligations.html"><link rel="next" href="https://github.com/pages/backbonecabal/knowledgebase/limit_order_books.html"><link rel="canonical" href="https://github.com/pages/backbonecabal/knowledgebase/technical.html"><link rel="icon" type="image/svg+xml" href="/pages/backbonecabal/knowledgebase/assets/images/favicon.svg"><link rel="icon" type="image/png" href="/pages/backbonecabal/knowledgebase/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/pages/backbonecabal/knowledgebase/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/pages/backbonecabal/knowledgebase/assets/images/favicon-96x96.png" sizes="96x96"><link rel="mask-icon" href="/pages/backbonecabal/knowledgebase/assets/images/favicon.svg" color="#2980b9"><link rel="apple-touch-icon" href="/pages/backbonecabal/knowledgebase/assets/images/apple-touch-icon-300x300.jpg"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/css/theme.min.css"><script> window.ui = { title: "Backbone Knowledgebase", baseurl: "/pages/backbonecabal/knowledgebase", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/pages/backbonecabal/knowledgebase/" title="Documentation and Information for Backbone Cabal"> <i class="fa fa-home"></i> Backbone Knowledgebase </a> </div> <span class="version">v1.4.0</span> <form class="search pt-2" action="/pages/backbonecabal/knowledgebase/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> <li class="toc level-1 " data-sort="1" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/proposal.html">1. Sushiswap Proposal</a> </li> <li class="toc level-1 " data-sort="2" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/benefits.html">2. Benefits</a> </li> <li class="toc level-1 " data-sort="4" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/refunder.html">4. Proxy Gas Refunder</a> </li> <li class="toc level-1 " data-sort="5" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/directory.html">5. Directory</a> </li> <li class="toc level-1 " data-sort="6" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/trade-settlement.html">6. Trade and Settlement</a> </li> <li class="toc level-1 " data-sort="7" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/suspensions.html">7. Suspension and Disciplinary Proceedings</a> </li> <li class="toc level-1 " data-sort="8" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/obligations.html">8. Obligations</a> </li> <li class="toc level-1 current" data-sort="9" data-level="1"> <a class="d-flex flex-items-baseline current" href="/pages/backbonecabal/knowledgebase/technical.html">9. Technical Overview</a> </li> <li class="toc level-1 " data-sort="10" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/limit_order_books.html">10. Limit Order Books</a> </li> <li class="toc level-1 " data-sort="10" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/roadmap.html">10. Roadmap</a> </li> <li class="toc level-1 " data-sort="10" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/web3modal.html">10. Backbone Cabal rpc connect protocol (Web3 RPC Network)</a> </li> </ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/pages/backbonecabal/knowledgebase/api/"> SushiSwap User API </a><ul> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/FeeInformation.html">FeeInformation</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/Order.html">Order</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/OrderCancellation.html">OrderCancellation</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/OrderCancellationError.html">OrderCancellationError</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/OrderCreation.html">OrderCreation</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/OrderMetaData.html">OrderMetaData</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/OrderType.html">OrderType</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/Trade.html">Trade</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/pages/backbonecabal/knowledgebase/api/OrderPostError.html">OrderPostError</a> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/pages/backbonecabal/knowledgebase/api/Apis/"> API Overview </a><ul> </ul> </li></ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" aria-label="Toggle menu" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/pages/backbonecabal/knowledgebase/">Backbone Knowledgebase</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/pages/backbonecabal/knowledgebase/" title="/"> <i class="fa fa-home"></i> </a> </li><li class="breadcrumb-item" aria-current="page">technical.md</li></ul> <a class="edit" href="https://github.com/backbonecabal/knowledgebase/edit/gh-pages/technical.md" title="Edit on GitHub" rel="noreferrer" target="_blank"> <i class="fa fa-edit"></i> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="https://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <h1 id="technical-overview">Technical Overview</h1> <h3 id="user-example">User Example</h3> <p>Proposed end-user transaction example for interacting with the YCabal</p> <blockquote> <p>NOTE: Since the JSON-RPC spec allows responses to be returned in a different order than sent, we need a mechanism for choosing a canonical id from a list that doesn't depend on the order. This chooses the "minimum" id by an arbitrary ordering: the smallest string if possible, otherwise the smallest number, otherwise null.</p> </blockquote> <div class="language-jsx highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nx">order</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">Give</span><span class="p">:</span> <span class="nx">ETH</span><span class="p">,</span>
	<span class="na">Want</span><span class="p">:</span> <span class="nx">DAI</span><span class="p">,</span>
	<span class="na">SlippageLimit</span><span class="p">:</span> <span class="mi">10</span><span class="o">%</span><span class="p">,</span>
	<span class="na">Amount</span><span class="p">:</span> <span class="mi">1000</span><span class="nx">ETH</span><span class="p">,</span>
	<span class="na">Cabal</span><span class="p">:</span> <span class="mh">0xabc</span><span class="p">...,</span>
	<span class="na">FeesIn</span><span class="p">:</span> <span class="nx">DAI</span><span class="p">,</span>
	<span class="na">TargetDEX</span><span class="p">:</span> <span class="nx">SushiSwap</span><span class="p">,</span>
	<span class="na">Deadline</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
	<span class="na">Signature</span><span class="p">:</span> <span class="nx">sign</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">SignBytes</span><span class="p">())</span>
<span class="p">}</span>
</code></pre>  </div></div> <p>Now if the Cabal broadcasts this transaction with an arbitrage order, the transaction contains 2 orders:</p> <blockquote> <p>Note: the transaction below is a mock-up for the proposed <em>data fields</em></p> </blockquote> <div class="language-jsx highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nx">transactions</span> <span class="o">=</span> <span class="p">[</span>
	<span class="p">{</span>
		<span class="na">Give</span><span class="p">:</span> <span class="nx">ETH</span><span class="p">,</span>
		<span class="na">Want</span><span class="p">:</span> <span class="nx">DAI</span><span class="p">,</span>
		<span class="na">SlippageLimit</span><span class="p">:</span> <span class="mi">10</span><span class="o">%</span><span class="p">,</span>
		<span class="na">Amount</span><span class="p">:</span> <span class="mi">1000</span><span class="nx">ETH</span><span class="p">,</span>
		<span class="na">Cabal</span><span class="p">:</span> <span class="mh">0xabc</span><span class="p">...,</span>
		<span class="na">FeesIn</span><span class="p">:</span> <span class="nx">DAI</span><span class="p">,</span>
		<span class="na">TargetDEX</span><span class="p">:</span> <span class="nx">SushiSwap</span><span class="p">,</span>
		<span class="na">Deadline</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
		<span class="na">Signature</span><span class="p">:</span> <span class="nx">sign</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">SignBytes</span><span class="p">())</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="na">Give</span><span class="p">:</span> <span class="nx">DAI</span><span class="p">,</span>
		<span class="na">Want</span><span class="p">:</span> <span class="nx">ETH</span><span class="p">,</span>
		<span class="na">SlippageLimit</span><span class="p">:</span> <span class="mi">1</span><span class="o">%</span><span class="p">,</span>
		<span class="na">Amount</span><span class="p">:</span> <span class="mi">10</span><span class="nx">ETH</span><span class="p">,</span>
		<span class="na">Cabal</span><span class="p">:</span> <span class="mh">0xabc</span><span class="p">...,</span>
		<span class="na">FeesIn</span><span class="p">:</span> <span class="nx">DAI</span><span class="p">,</span>
		<span class="na">TargetDEX</span><span class="p">:</span> <span class="nx">SushiSwap</span><span class="p">,</span>
		<span class="na">Deadline</span><span class="p">:</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span>
		<span class="na">Signature</span><span class="p">:</span> <span class="nx">sign</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">SignBytes</span><span class="p">()),</span>
		<span class="nx">IsBackbone</span> <span class="na">Cabal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
		<span class="na">TransferProfitTo</span><span class="p">:</span> <span class="nx">transactions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">signer</span>
	<span class="p">}</span>
<span class="p">]</span>
</code></pre>  </div></div> <p>The arbitrage profit generated by second order is sent to the <code class="language-plaintext highlighter-rouge notranslate">msg.sender</code> of the first order.</p> <p>The first order will still lose 5%(assumption) in slippage.</p> <p>Arbitrage profits will rarely be more than the slippage loss.</p> <p>If someone front runs the transaction sent by the Cabal:</p> <ol> <li>They pay for the gas while post confirmation of transaction the fees for order1 goes to the relayer in the signed order.</li> <li>They lose 5% in slippage as our real user does.</li> </ol> <h2 id="engine">Engine</h2> <p>YCabal uses a batch auction-based matching engine to execute orders. Batch auctions were chosen to reduce the impact of frontrunning on the exchange.</p> <ol> <li> <p>All orders for the given market are collected.</p> </li> <li> <p>Orders beyond their time-in-force are canceled.</p> </li> <li> <p>Orders are placed into separate lists by market side, and aggregate supply and demand curves are calculated.</p> </li> <li> <p>The matching engine discovers the price at which the aggregate supply and demand curves cross, which yields the clearing price. If there is a horizontal cross - i.e., two prices for which aggregate supply and demand are equal - then the clearing price is the midpoint between the two prices.</p> </li> <li> <p>If both sides of the market have equal volume, then all orders are completely filled. If one side has more volume than the other, then the side with higher volume is rationed pro-rata based on how much its volume exceeds the other side. For example, if aggregate demand is 100 and aggregate supply is 90, then every order on the demand side of the market will be matched by 90%.</p> </li> </ol> <p>Orders are sorted based on their price, and order ID. Order IDs are generated at post time and is the only part of the matching engine that is time-dependent. However, the oldest order IDs are matched first so there is no incentive to post an order ahead of someone else's.</p> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"><a href="/pages/backbonecabal/knowledgebase/obligations.html" class="btn" title="Obligations" accesskey="p" rel="prev"> <i class="fa fa-arrow-circle-left"></i> Previous </a></div> <div class="next"><a href="/pages/backbonecabal/knowledgebase/limit_order_books.html" class="btn" title="Limit Order Books" accesskey="n" rel="next"> Next <i class="fa fa-arrow-circle-right"></i> </a></div> </div><hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2021,</span> <a class="text-gray" href="https://github.com/backbonecabal" rel="noreferrer" target="_blank">backbonecabal</a> Revision <a class="text-gray" href="https://github.com/backbonecabal/knowledgebase/commit/e07a35759318188916c4a5c8cb3742a48ebec59b" title="e07a35759318188916c4a5c8cb3742a48ebec59b" rel="noreferrer" target="_blank">e07a357</a> <br> <div class="generator"> Built with <a href="https://pages.github.com" rel="noreferrer" target="_blank" title="github-pages v209">GitHub Pages</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="rundocs/jekyll-rtd-theme v2.0.10">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> Backbone Knowledgebase </div> <div class="branch p-1"> <span class="name"> gh-pages </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/backbonecabal/knowledgebase" title="Stars: 0"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/backbonecabal/knowledgebase/issues" title="Open issues: 0"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/backbonecabal/knowledgebase/zipball/gh-pages" title="Size: 3510 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> This <a href="/pages/backbonecabal/knowledgebase/" title="Backbone Knowledgebase">Software</a> is under the terms of <a href="https://github.com/backbonecabal/knowledgebase">The Unlicense</a>. </div> </div> </div> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/theme.min.js"></script> </body> </html>